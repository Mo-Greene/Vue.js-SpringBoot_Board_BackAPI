<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mogreene.board.dao.BoardDAO">

    <!--게시글 등록-->
    <insert id="postArticle" parameterType="BoardDTO">
        INSERT INTO board
            (category_no, board_title, board_content, board_writer,
             board_password)

        VALUES
            (#{categoryNo}, #{boardTitle}, #{boardContent}, #{boardWriter},
             #{boardPassword})
    </insert>

    <!--게시글 상세조회-->
    <select id="getArticleView" resultType="BoardDTO">
        SELECT board_no,
               board_title,
               board_content,
               board_writer,
               board_reg_date,
               board_mod_date,
               board_view,
               c.category_content

        FROM board as b
            JOIN category as c
                ON b.category_no = c.category_no

        WHERE board_no = #{boardNo}
    </select>

    <!--게시글 조회수 증가-->
    <update id="viewCount" parameterType="long">
        UPDATE board

        SET board_view = board_view + 1

        WHERE board_no = #{boardNo}
    </update>

    <!--게시글 삭제-->
    <delete id="deleteArticle" parameterType="long">
        DELETE FROM board

        WHERE board_no = #{boardNo}
    </delete>

    <!--게시글 수정-->
    <update id="modifyArticle" parameterType="BoardDTO">
        UPDATE board

        SET board_writer = #{baordWriter},
            board_title = #{boardTitle},
            board_content = #{boardContent},
            board_mod_date = current_timestamp

        WHERE board_no = #{boardNo}
    </update>
</mapper>